import './polyfills.server.mjs';
import{a as U}from"./chunk-TATK53YE.mjs";import{a as s}from"./chunk-DHFMCXLI.mjs";import{a as L,b as j,c as G}from"./chunk-JHMV2IEY.mjs";import{a as k}from"./chunk-CCABLLK4.mjs";import{a as z}from"./chunk-RYEZGI2T.mjs";import"./chunk-4ZME3WXD.mjs";import{a as F,d as V}from"./chunk-6YEE64KF.mjs";import"./chunk-KA6NYIQQ.mjs";import"./chunk-NY6I3ZXY.mjs";import"./chunk-J4BDXTMW.mjs";import{$ as I,Ab as M,Dc as A,Ec as E,Hb as c,Ib as x,Ic as D,Jb as u,Lb as b,Mb as R,Na as S,Rb as O,Sa as o,Sb as T,Tb as B,W as a,cb as l,ib as g,kb as _,ob as C,pb as h,qb as P,rb as v,sb as i,tb as r,ub as f,wa as y}from"./chunk-ZYYXYTHJ.mjs";import"./chunk-VVCT4QZE.mjs";var W=()=>[1,2,3,4,5];function Y(n,m){if(n&1&&f(0,"img",16),n&2){let e=M().$implicit;_("src",e.image_url,S)}}function $(n,m){n&1&&g(0,Y,1,1,"ng-template",9)}function q(n,m){n&1&&f(0,"i",13)}function H(n,m){n&1&&f(0,"i",14)}function J(n,m){if(n&1&&(i(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),c(5,"productDetails:"),r()()(),i(6,"div",2)(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"owl-carousel-o",8),P(12,$,1,0,null,9,h),r()()(),i(14,"div",6)(15,"div",10)(16,"h6"),c(17),r(),i(18,"p"),c(19),r(),i(20,"p"),c(21),r(),i(22,"div",11)(23,"span"),c(24),O(25,"currency"),r(),i(26,"div",12),P(27,q,1,0,"i",13,h),g(29,H,1,0,"i",14),i(30,"span",15),c(31),r()()(),i(32,"p"),c(33),O(34,"date"),r()()()()()()()()),n&2){let e=M();o(11),_("options",e.customOptions),o(),v(e.productImages()),o(5),u("name:",e.productInfo.name.slice(0,15),""),o(2),u("description: ",e.productInfo.description.slice(0,35),""),o(2),x(e.productInfo.brand),o(3),u(" ",B(25,8,e.productInfo.price,"GBP")," "),o(3),v(R(13,W).slice(0,e.productInfo.average_rating)),o(2),C(29,e.productInfo.average_rating%1!==0?29:-1),o(2),x(e.productInfo.average_rating),o(2),u("",T(34,11,e.productInfo.created_at)," ")}}var ct=(()=>{class n{constructor(){this.customOptions={loop:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!0,autoplay:!0,rtl:!0,autoplayTimeout:3e3,autoplaySpeed:2e3,navSpeed:700,navText:["",""],responsive:{0:{items:1},400:{items:1},740:{items:1},940:{items:1}},nav:!1},this._PLATFORM_ID=a(y),this._ReviewService=a(U),this._Router=a(V),this._AllproductsService=a(k),this._ActivatedRoute=a(F),this._ToastrService=a(z),this.ProductId=l(""),this.mainImg=l(""),this.productImages=l([]),this.AllReview=l(null),this.productInfo=null}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:e=>{this.ProductId.set(e.get("id")),this._AllproductsService.getProductById(this.ProductId()).subscribe({next:t=>{t.message==="Product retrieved successfully"&&(this.productInfo=t.data,this.mainImg.set(t.data.main_image),this.productImages.set(t.data.images))},error:t=>{console.log(t)}}),this._ReviewService.getAllReviewProduct(this.ProductId()).subscribe({next:t=>{console.log(t),this.AllReview.set(t.data)},error:t=>{console.log(t)}})}})}editReview(e){D(this._PLATFORM_ID)&&s.fire({title:"Edit your review",html:`
        <div style="text-align: left;">
          <label for="rating" style="font-weight:600;">Rating:</label>
          <input id="rating" type="number" min="1" max="5" class="swal2-input" placeholder="1 - 5">
          <label for="comment" style="font-weight:600;">Comment:</label>
          <textarea id="comment" class="swal2-textarea" placeholder="Write your comment..."></textarea>
        </div>
      `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Save",cancelButtonText:"Cancel",preConfirm:()=>{let t=document.getElementById("rating"),p=document.getElementById("comment"),d=t?.value,w=p?.value;return!d||!w?(s.showValidationMessage("Please enter both rating and comment"),!1):{rating:+d,comment:w.trim()}}}).then(t=>{if(t.isConfirmed&&t.value){let p={rating:t.value.rating,comment:t.value.comment};this._ReviewService.updateReview(e,p).subscribe({next:d=>{s.fire({icon:"success",title:"Review updated!",text:"Your review has been successfully saved.",timer:1500,showConfirmButton:!1}),console.log(d)},error:d=>{s.fire({icon:"error",title:"Error",text:"Failed to update review. Please try again."}),console.error(d)}})}})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=I({type:n,selectors:[["app-viewproduct"]],standalone:!0,features:[b],decls:1,vars:1,consts:[[1,"product-info"],[1,"container"],[1,"col-12"],[1,"product-info-heading"],[1,"product"],[1,"row"],[1,"col-lg-6","col-sm-12","col-md-12"],[1,"img-slider"],[3,"options"],["carouselSlide",""],[1,"product-about"],[1,"product-details","d-flex"],[1,"rating"],[1,"fa-solid","fa-star","rating-color"],[1,"fa-solid","fa-star-half-stroke","rating-color"],[1,"text-muted"],["alt","img product",1,"img-fluid",3,"src"]],template:function(t,p){t&1&&g(0,J,35,14,"section",0),t&2&&C(0,p.productInfo?0:-1)},dependencies:[E,A,G,j,L],styles:[".product-info[_ngcontent-%COMP%]{width:100%;height:auto}.product-info[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:1100px;height:auto}.product-info[_ngcontent-%COMP%]   .product-info-heading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;text-decoration:underline;color:#639;font-size:25px;font-weight:700;padding-top:35px}.product-info[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]{width:100%;height:auto;margin-top:25px}.product-info[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .img-slider[_ngcontent-%COMP%]   .img-fluid[_ngcontent-%COMP%]{width:100%;height:370px!important}.product-info[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .product-about[_ngcontent-%COMP%]{margin-top:50px}.product-info[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .product-about[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:20px;color:#000}.product-info[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .product-about[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000}.product-info[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .product-about[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap!important;justify-content:space-between;height:auto;color:#ffc908;font-size:12px;padding-left:40px}.product-info[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .product-about[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ffc908;font-weight:700;margin-left:5px}@media (max-width:767px){.product-info[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:470px!important}.product-info[_ngcontent-%COMP%]   .product-info-heading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-top:70px}.product-info[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .img-slider[_ngcontent-%COMP%]{overflow:hidden!important}.product-info[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .img-slider[_ngcontent-%COMP%]   .img-fluid[_ngcontent-%COMP%]{width:100%;height:auto!important}}@media (min-width:768px)and(max-width:1023px){.product-info[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:400px!important;height:auto}.product-info[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .img-slider[_ngcontent-%COMP%]{overflow:hidden}.product-info[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .img-slider[_ngcontent-%COMP%]   .img-fluid[_ngcontent-%COMP%]{width:100%!important;height:auto!important}.product-info[_ngcontent-%COMP%]   .product-info-heading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-top:70px}}"]})}}return n})();export{ct as ViewproductComponent};
