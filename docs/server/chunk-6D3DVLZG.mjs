import './polyfills.server.mjs';
import{a as _e}from"./chunk-TATK53YE.mjs";import{a as h}from"./chunk-DHFMCXLI.mjs";import{a as ee,b as w,c as te,d as ne,e as ie,f as oe,g as re,h as ae,i as le,j as de,k as ce,l as me}from"./chunk-4D3WAGGC.mjs";import{a as ue,b as pe,c as ge}from"./chunk-JHMV2IEY.mjs";import{a as se}from"./chunk-CCABLLK4.mjs";import{a as Z}from"./chunk-RYEZGI2T.mjs";import"./chunk-4ZME3WXD.mjs";import{a as X}from"./chunk-6YEE64KF.mjs";import"./chunk-KA6NYIQQ.mjs";import"./chunk-NY6I3ZXY.mjs";import"./chunk-J4BDXTMW.mjs";import{$ as G,Ab as C,Dc as H,Ec as J,Hb as a,Ib as S,Ic as Q,Jb as x,Lb as W,Mb as z,Na as K,Ob as k,Rb as V,Sa as l,Tb as N,W as P,cb as b,ib as _,ka as E,kb as M,la as T,ob as f,pb as I,qb as O,rb as R,sb as o,tb as i,ub as v,wa as Y,xb as A,yc as U,zb as D}from"./chunk-ZYYXYTHJ.mjs";import{a as B}from"./chunk-VVCT4QZE.mjs";var Ce=(t,c)=>c.review_id,fe=()=>[1,2,3,4,5],ve=(t,c)=>({"is-valid":t,"is-invalid":c});function xe(t,c){if(t&1&&v(0,"img",34),t&2){let e=C().$implicit;M("src",e.image_url,K)}}function we(t,c){t&1&&_(0,xe,1,1,"ng-template",9)}function he(t,c){t&1&&v(0,"i",13)}function Pe(t,c){t&1&&v(0,"i",14)}function be(t,c){t&1&&(o(0,"p"),a(1,"Rating is required."),i())}function Me(t,c){t&1&&(o(0,"p"),a(1,"Minimum allowed rating is 1."),i())}function Oe(t,c){t&1&&(o(0,"p"),a(1,"Maximum allowed rating is 5."),i())}function Re(t,c){t&1&&(o(0,"p"),a(1,"Rating must be a number (up to 2 decimal places)."),i())}function Se(t,c){if(t&1&&(o(0,"div",24),_(1,be,2,0,"p")(2,Me,2,0)(3,Oe,2,0)(4,Re,2,0),i()),t&2){let e,n=C(2);l(),f(1,(e=n.addReviewForm.get("rating"))!=null&&e.getError("required")?1:(e=n.addReviewForm.get("rating"))!=null&&e.getError("min")?2:(e=n.addReviewForm.get("rating"))!=null&&e.getError("max")?3:(e=n.addReviewForm.get("rating"))!=null&&e.getError("pattern")?4:-1)}}function ye(t,c){t&1&&(o(0,"p"),a(1,"Comment is required."),i())}function Fe(t,c){t&1&&(o(0,"p"),a(1," Comment must be at least 5 characters long."),i())}function Ee(t,c){t&1&&(o(0,"p"),a(1,"Comment cannot exceed 100 characters."),i())}function Te(t,c){if(t&1&&(o(0,"div",24),_(1,ye,2,0,"p")(2,Fe,2,0)(3,Ee,2,0),i()),t&2){let e,n=C(2);l(),f(1,(e=n.addReviewForm.get("comment"))!=null&&e.getError("required")?1:(e=n.addReviewForm.get("comment"))!=null&&e.getError("minlength")?2:(e=n.addReviewForm.get("comment"))!=null&&e.getError("maxlength")?3:-1)}}function Ie(t,c){t&1&&(o(0,"p",31),a(1," No reviews yet \u{1F605}"),i())}function De(t,c){t&1&&v(0,"i",13)}function Be(t,c){if(t&1){let e=A();o(0,"div",33)(1,"div",35)(2,"p",36),a(3),i(),o(4,"p",37),a(5),V(6,"date"),i(),O(7,De,1,0,"i",13,I),o(9,"p",38),a(10),i()(),o(11,"div",39)(12,"button",40),D("click",function(){let d=E(e).$implicit,m=C(2);return T(m.editReview(d.review_id))}),v(13,"i",41),i(),o(14,"button",42),D("click",function(){let d=E(e).$implicit,m=C(2);return T(m.deleteReview(d.review_id))}),v(15,"i",43),i()()()}if(t&2){let e=c.$implicit;l(3),x("id:",e.review_id,""),l(2),S(N(6,3,e.created_at,"medium")),l(2),R(z(6,fe).slice(0,e.rating)),l(3),x("comment:",e.comment,"")}}function Ae(t,c){if(t&1){let e=A();o(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),a(5,"Product Details:"),i()()(),o(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"owl-carousel-o",8),O(11,we,1,0,null,9,I),i()()(),o(13,"div",6)(14,"div",10)(15,"h3")(16,"span"),a(17,"name:"),i(),a(18),i(),o(19,"p")(20,"span"),a(21,"description:"),i(),a(22),i(),o(23,"p")(24,"span"),a(25,"brands:"),i(),a(26),i(),o(27,"div",11)(28,"p")(29,"span"),a(30,"price:"),i(),a(31),V(32,"currency"),i(),o(33,"div",12),O(34,he,1,0,"i",13,I),_(36,Pe,1,0,"i",14),o(37,"span"),a(38),i()()(),o(39,"button",15),a(40," AddToCart"),i()()()()(),o(41,"div",2)(42,"div",16)(43,"div",5)(44,"div",17)(45,"div",18)(46,"h4"),a(47,"Customer Reviews:"),i()(),o(48,"div",19),a(49," \u2B50 "),o(50,"strong"),a(51),i(),o(52,"span"),a(53),i()(),o(54,"div",20)(55,"h4"),a(56,"\u{1F4DD} Add Your Review"),i(),o(57,"form",21),D("ngSubmit",function(){E(e);let d=C();return T(d.addReviewSubmit())}),o(58,"div",22),v(59,"input",23),_(60,Se,5,1,"div",24),i(),o(61,"div",22),v(62,"textarea",25),_(63,Te,4,1,"div",24),i(),o(64,"button",26),a(65,"Submit"),i()()()(),o(66,"div",2)(67,"div",27)(68,"div",28)(69,"h5",29),a(70," All product reviews"),i(),o(71,"span",30),a(72),i()(),_(73,Ie,2,0,"p",31),o(74,"div",32),O(75,Be,16,7,"div",33,Ce),i()()()()()()()()}if(t&2){let e,n,d,m,s,g,q,L,u,y,p,F,$,j,r=C();l(10),M("options",r.customOptions),l(),R(r.productImages()),l(7),S((e=r.ProductDetails())==null?null:e.name),l(4),x(" ",(n=r.ProductDetails())==null||n.description==null?null:n.description.slice(0,40),""),l(4),x(" ",(d=r.ProductDetails())==null?null:d.brand,""),l(5),x(" ",N(32,16,(m=r.ProductDetails())==null?null:m.price,"GBP"),""),l(3),R(z(19,fe).slice(0,(s=r.ProductDetails())==null?null:s.average_rating)),l(2),f(36,((g=(g=r.ProductDetails())==null?null:g.average_rating)!==null&&g!==void 0?g:0)%1!==0?36:-1),l(2),S((q=r.ProductDetails())==null?null:q.average_rating),l(13),S(r.averageRating()),l(2),x("(",(L=r.reviewItems())==null?null:L.length," reviews)"),l(4),M("formGroup",r.addReviewForm),l(2),M("ngClass",k(20,ve,!((u=r.addReviewForm.get("rating"))!=null&&u.errors)&&(((u=r.addReviewForm.get("rating"))==null?null:u.touched)||((u=r.addReviewForm.get("rating"))==null?null:u.dirty)),((u=r.addReviewForm.get("rating"))==null?null:u.errors)&&(((u=r.addReviewForm.get("rating"))==null?null:u.touched)||((u=r.addReviewForm.get("rating"))==null?null:u.dirty)))),l(),f(60,(y=r.addReviewForm.get("rating"))!=null&&y.errors&&((y=r.addReviewForm.get("rating"))!=null&&y.touched)?60:-1),l(2),M("ngClass",k(23,ve,!((p=r.addReviewForm.get("comment"))!=null&&p.errors)&&(((p=r.addReviewForm.get("comment"))==null?null:p.touched)||((p=r.addReviewForm.get("comment"))==null?null:p.dirty)),((p=r.addReviewForm.get("comment"))==null?null:p.errors)&&(((p=r.addReviewForm.get("comment"))==null?null:p.touched)||((p=r.addReviewForm.get("comment"))==null?null:p.dirty)))),l(),f(63,(F=r.addReviewForm.get("comment"))!=null&&F.errors&&((F=r.addReviewForm.get("comment"))!=null&&F.touched)?63:-1),l(9),x(" Total reviews: ",($=r.reviewItems())==null?null:$.length,""),l(),f(73,((j=r.reviewItems())==null?null:j.length)===0?73:-1),l(2),R(r.reviewItems())}}var He=(()=>{class t{constructor(){this._ActivatedRoute=P(X),this._AllproductsService=P(se),this._ReviewService=P(_e),this._ToastrService=P(Z),this._FormBuilder=P(ce),this._PLATFORM_ID=P(Y),this.ProductDetails=b(null),this.productImages=b([]),this.productId=b(""),this.reviewItems=b(null),this.averageRating=b(0),this.addReviewForm=this._FormBuilder.group({rating:[null,[w.required,w.min(1),w.max(5),w.pattern(/^\d+(\.\d{1,2})?$/)]],comment:[null,[w.required,w.minLength(10),w.maxLength(50)]]}),this.customOptions={loop:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!0,autoplay:!0,rtl:!0,autoplayTimeout:3e3,autoplaySpeed:2e3,navSpeed:700,navText:["",""],responsive:{0:{items:1},400:{items:1},740:{items:1},940:{items:1}},nav:!1}}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:e=>{this.productId.set(e.get("id")),this._AllproductsService.getProductById(this.productId()).subscribe({next:n=>{this.ProductDetails.set(n.data),this.productImages.set(n.data.images)},error(n){console.log(n)}}),this._ReviewService.getAllReviewProduct(this.productId()).subscribe({next:n=>{if(n.message==="Reviews retrieved successfully")if(this.reviewItems.set(n.data),n.data.length>0){let d=n.data.reduce((s,g)=>s+Number(g.rating),0),m=Number((d/n.data.length).toFixed(1));this.averageRating.set(m)}else this.averageRating.set(0)},error:n=>{console.log(n)}})}})}addReviewSubmit(){this.addReviewForm.valid?this._ReviewService.AddReview(this.productId(),this.addReviewForm.value).subscribe({next:e=>{if(console.log(e),e.message==="Review created successfully"){this._ToastrService.success(e.message,"Euphoria Folks Pvt Ltd");let n=e.data;this.reviewItems.update(d=>[n,...d??[]])}},error:e=>{console.log(e)}}):this.addReviewForm.markAllAsTouched()}editReview(e){Q(this._PLATFORM_ID)&&h.fire({title:"Edit your review",html:`
          <div style="text-align: left;">
            <label for="rating" style="font-weight:600;">Rating:</label>
            <input id="rating" type="number" min="1" max="5" class="swal2-input" placeholder="1 - 5">
            <label for="comment" style="font-weight:600;">Comment:</label>
            <textarea id="comment" class="swal2-textarea" placeholder="Write your comment..."></textarea>
          </div>
        `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Save",cancelButtonText:"Cancel",preConfirm:()=>{let n=document.getElementById("rating"),d=document.getElementById("comment"),m=n?.value,s=d?.value;return!m||!s?(h.showValidationMessage("Please enter both rating and comment"),!1):{rating:+m,comment:s.trim()}}}).then(n=>{if(n.isConfirmed&&n.value){let d={rating:n.value.rating,comment:n.value.comment};this._ReviewService.updateReview(e,d).subscribe({next:m=>{h.fire({icon:"success",title:"Review updated!",text:"Your review has been successfully saved.",timer:1500,showConfirmButton:!1}),this.reviewItems.update(s=>s&&s.map(g=>g.review_id===e?B(B({},g),d):g))},error:m=>{h.fire({icon:"error",title:"Error",text:"Failed to update review. Please try again."}),console.error(m)}})}})}deleteReview(e){h.fire({title:"Are you sure?",text:"You won\u2019t be able to recover this review!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel",confirmButtonColor:"#d33",cancelButtonColor:"#3085d6"}).then(n=>{n.isConfirmed&&this._ReviewService.deleteReview(e).subscribe({next:d=>{h.fire({title:"Deleted!",text:"The review has been deleted successfully \u2705",icon:"success",confirmButtonText:"OK"}),this.reviewItems.update(m=>(m??[]).filter(s=>s.review_id!==e))},error:d=>{h.fire({title:"Error!",text:"Something went wrong while deleting \u274C",icon:"error",confirmButtonText:"OK"}),console.log(d)}})})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=G({type:t,selectors:[["app-product"]],standalone:!0,features:[W],decls:1,vars:1,consts:[[1,"product-list"],[1,"container"],[1,"col-12"],[1,"product-list-head"],[1,"product-info"],[1,"row"],[1,"col-lg-6","col-sm-12","col-md-6"],[1,"img-product"],[3,"options"],["carouselSlide",""],[1,"product-details"],[1,"d-flex"],[1,"rating"],[1,"fa-solid","fa-star","rating-color"],[1,"fa-solid","fa-star-half-stroke","rating-color"],[1,"btn","btn-danger"],[1,"review-about"],[1,"col-lg-6","col-sm-12","col-md-6","order-lg-1","order-2"],[1,"review-title"],[1,"rating-summary"],[1,"add-review-form"],[3,"ngSubmit","formGroup"],[1,"form-info"],["type","number","min","1","max","5","placeholder","Rating (1\u20135)","formControlName","rating",3,"ngClass"],[1,"alert","alert-danger"],["rows","3","placeholder","Write your comment...","formControlName","comment",3,"ngClass"],["type","submit",1,"btn","btn-danger"],[1,"review-all-items","p-4","rounded-3","shadow-sm","bg-white"],[1,"review-head","mb-4","d-flex","justify-content-between","align-items-center","border-bottom","pb-2"],[1,"fw-bold","text-primary","mb-0"],[1,"text-muted","small"],[1,"text-center","text-secondary","mt-3"],[1,"review-list","mt-3"],[1,"review-item","border-bottom","py-3","d-flex","justify-content-between","align-items-start","flex-wrap","mb-3"],["alt","img product",1,"img-fluid",3,"src"],[1,"review-content","flex-grow-1"],[1,"mb-1","fw-semibold","text-dark"],[1,"mb-2","text-muted","small"],[1,"mb-0"],[1,"review-actions","d-flex","align-items-center","gap-2","mt-2","mt-md-0"],["aria-label","Edit review",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"fa-solid","fa-pen"],["aria-label","Delete review",1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fa-solid","fa-trash"]],template:function(n,d){n&1&&_(0,Ae,77,26,"section",0),n&2&&f(0,d.ProductDetails()?0:-1)},dependencies:[J,ge,pe,ue,me,ie,ee,oe,te,ne,de,le,re,ae,H,U],styles:[".product-list[_ngcontent-%COMP%], .product-list[_ngcontent-%COMP%]   .product-list-head[_ngcontent-%COMP%]{width:100%;height:auto}.product-list[_ngcontent-%COMP%]   .product-list-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#639;text-align:center;text-decoration:underline;padding-top:35px;margin-bottom:30px}.product-list[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{width:100%;height:auto}.product-list[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .img-product[_ngcontent-%COMP%]   .img-fluid[_ngcontent-%COMP%]{width:100%;height:320px!important;border-radius:10px;cursor:pointer}.product-list[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000}.product-list[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#639;font-size:18px;font-weight:700;padding-top:22px}.product-list[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#639;font-size:17px}.product-list[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap!important;justify-content:space-between;height:auto;color:#ffc908;font-size:12px;padding-left:40px}.product-list[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ffc908;font-weight:700;margin-left:5px}@media (max-width: 767px){.product-list[_ngcontent-%COMP%]{padding-bottom:50px}}@media (min-width: 768px) and (max-width: 1023px){.product-list[_ngcontent-%COMP%]{padding-bottom:50px}}.review-about[_ngcontent-%COMP%]{width:100%;height:auto;margin-top:30px}.all-reviews[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:15px;box-shadow:0 4px 15px #0000001a;overflow:hidden;height:auto}.review-item[_ngcontent-%COMP%]{background:#f9f9f9;border-radius:14px;padding:20px;text-align:center;transition:transform .3s ease,box-shadow .3s ease}.review-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 6px 20px #0000001f}.review-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;color:#222;margin-bottom:8px;font-weight:600}.review-item[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:.95rem;color:#555;margin:8px 0;font-weight:500}.review-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;color:#888;margin-top:6px}.rating-color[_ngcontent-%COMP%]{color:#f9b115;font-size:1.1rem;margin:0 2px}.owl-carousel[_ngcontent-%COMP%]   .owl-stage[_ngcontent-%COMP%]{display:flex;align-items:stretch}.owl-carousel[_ngcontent-%COMP%]   .owl-item[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (max-width: 767px){.review-item[_ngcontent-%COMP%]{padding:15px}.review-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem}.review-item[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:.9rem}}.review-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#222;margin-bottom:10px;margin-top:15px}.rating-summary[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:20px;color:#333}.rating-summary[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#f9b115;font-size:1.3rem;margin:0 4px}.rating-summary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#777}.add-review-form[_ngcontent-%COMP%]{margin-top:15px;border-top:1px solid #eee;padding-top:20px;width:100%;height:auto}.add-review-form[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem;color:#444;margin-bottom:15px}.add-review-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;height:auto}.add-review-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-review-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 14px;border:1px solid #ddd;border-radius:10px;font-size:.95rem;transition:border-color .3s,box-shadow .3s}.review-about[_ngcontent-%COMP%]   .add-review-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-info[_ngcontent-%COMP%]{margin-bottom:15px}.review-about[_ngcontent-%COMP%]   .add-review-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:25px!important}.review-about[_ngcontent-%COMP%]   .add-review-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{margin:0;padding:0}.review-about[_ngcontent-%COMP%]   .add-review-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:8px;padding-top:5px;font-size:15px}@media (max-width: 767px){.review-section[_ngcontent-%COMP%]{padding:20px}.review-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.15rem}.btn-submit[_ngcontent-%COMP%]{font-size:.95rem}}"]})}}return t})();export{He as ProductComponent};
