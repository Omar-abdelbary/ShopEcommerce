import{a as B}from"./chunk-6WVAPJ2E.js";import{a as Y}from"./chunk-YUE5HA66.js";import{c as D,d as y,f,h as v}from"./chunk-XAZLOLJU.js";import{d as z}from"./chunk-FP5HR63J.js";import"./chunk-WQQJBAV6.js";import"./chunk-5QGUVPJV.js";import"./chunk-6GFOHB5E.js";import{Bb as M,Db as g,Eb as m,Lb as c,Mb as C,Nb as V,Pb as q,Ra as k,Vb as O,Wa as s,Xb as b,aa as x,fa as S,gb as h,mb as I,ob as u,qa as d,ra as p,sb as T,ub as E,vb as A,wb as o,xb as a,yb as l,zc as F}from"./chunk-UOMAL6QC.js";var $=(r,_)=>_.product_id;function j(r,_){if(r&1){let t=M();o(0,"div",8)(1,"div",10)(2,"div",11),l(3,"img",12),a()(),o(4,"div",13)(5,"div",14)(6,"div",15)(7,"h5"),c(8),a(),o(9,"h5"),c(10),O(11,"currency"),a(),o(12,"button",5),g("click",function(){let n=d(t).$implicit,e=m(2);return p(e.removeItem(n.cart_item_id))}),l(13,"i",6),c(14," remove"),a()(),o(15,"div",16)(16,"span")(17,"button",17),g("click",function(){let n=d(t).$implicit,e=m(2);return p(e.updateQuantity(n.cart_item_id,n.product_id,n.quantity-1))}),l(18,"i",18),a()(),o(19,"span")(20,"p"),c(21),a()(),o(22,"span")(23,"button",19),g("click",function(){let n=d(t).$implicit,e=m(2);return p(e.updateQuantity(n.cart_item_id,n.product_id,n.quantity+1))}),l(24,"i",20),a()()()()()()}if(r&2){let t=_.$implicit;u("@fadeIn",void 0),s(3),u("src",t.main_image,k),s(5),C(t.product_name),s(2),C(b(11,5,t.final_price,"GBP")),s(11),C(t.quantity)}}function N(r,_){if(r&1){let t=M();o(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),c(5,"CartDetails:"),a()()(),o(6,"div",2)(7,"div",4)(8,"h6"),c(9),O(10,"currency"),a(),o(11,"button",5),g("click",function(){d(t);let n=m();return p(n.removeAllItems())}),l(12,"i",6),c(13,"RemoveAllItems"),a()()(),o(14,"div",7),E(15,j,25,8,"div",8,$),a(),o(17,"button",9),g("click",function(){d(t);let n=m();return p(n.payment())}),c(18,"\u{1F4B3} Pay Now"),a()()()}if(r&2){let t=m();u("@fadeIn",void 0),s(9),V("totalCartPrice:",b(10,2,t.TotalPrice(),"GBP"),""),s(6),A(t.AllItems())}}function Q(r,_){r&1&&(o(0,"section",0)(1,"div",1)(2,"div",21),l(3,"img",22),o(4,"h6"),c(5,"Your cart is empty and sad : "),l(6,"br"),c(7,"Add something to make it happy!"),a(),o(8,"button",23),c(9,"Continue Shopping"),a()()()())}var Z=(()=>{class r{constructor(){this._CartService=x(B),this._ToastrService=x(Y),this.AllItems=h(null),this.TotalPrice=h("")}ngOnInit(){this._CartService.getCart().subscribe({next:t=>{t.message==="Cart retrieved successfully"&&(this.AllItems.set(t.data),this.TotalPrice.set(t.total_price))},error:t=>{console.log(t)}})}removeAllItems(){this._CartService.deleteAllItems().subscribe({next:t=>{console.log(t),t.message==="All items removed from cart"&&(this.AllItems.set([]),this.TotalPrice.set("0"),this._ToastrService.success(t.message,"Euphoria Folks Pvt Ltd"))},error:t=>{console.log(t)}})}removeItem(t){this._CartService.deleteItem(t).subscribe({next:i=>{if(i.message==="Cart item removed successfully"){let e=(this.AllItems()||[]).filter(P=>P.cart_item_id!==t);this.AllItems.set(e),this._ToastrService.success(i.message,"Euphoria Folks Pvt Ltd");let L=e.reduce((P,w)=>P+Number(w.final_price)*Number(w.quantity),0);this.TotalPrice.set(L)}},error:i=>{console.log(i)}})}updateQuantity(t,i,n){this._CartService.updateCartItem(t,i,n).subscribe({next:e=>{e.message==="Cart item updated successfully"&&(this._ToastrService.success(e.message,"Euphoria Folks Pvt Ltd"),this.AllItems.set(e.data),this.TotalPrice.set(e.total_price))},error:e=>{console.log(e)}})}payment(){this._CartService.paymentByVisa().subscribe({next:t=>{console.log(t),t.message==="Payment session url has been created"&&(window.open(t.url,"_self"),this._ToastrService.success(t.message,"Euphoria Folks Pvt Ltd"))},error:t=>{console.log(t)}})}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=S({type:r,selectors:[["app-cart"]],standalone:!0,features:[q],decls:2,vars:1,consts:[[1,"cart-info"],[1,"container"],[1,"col-12"],[1,"cart-head"],[1,"cart-price-info"],[1,"btn","bg-danger","text-white",3,"click"],[1,"fa-solid","fa-trash"],[1,"cart-details"],[1,"row"],[1,"btn","payment-btn",3,"click"],[1,"col-lg-2","col-sm-12","col-md-2"],[1,"img-item"],["alt","product img ",1,"img-fluid",3,"src"],[1,"col-lg-10","col-sm-12","col-md-10"],[1,"item-describtion"],[1,"item-about"],[1,"item-quantity"],["aria-label","Decrease quantity",1,"btn",3,"click"],[1,"fa-solid","fa-circle-minus"],["aria-label","Increase quantity",1,"btn",3,"click"],[1,"fa-solid","fa-circle-plus"],[1,"empty-cart"],["src","./assets/img/cart.svg","alt","empty cart",1,"img-fluid"],["routerLink","/allproducts",1,"btn"]],template:function(i,n){if(i&1&&I(0,N,19,5,"section",0)(1,Q,10,0),i&2){let e;T(0,((e=(e=n.AllItems())==null?null:e.length)!==null&&e!==void 0?e:0)>0?0:1)}},dependencies:[F,z],styles:[".cart-info[_ngcontent-%COMP%]{width:100%;height:auto;background-color:#f0f8ff;padding-bottom:35px}.cart-info[_ngcontent-%COMP%]   .cart-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-top:50px;color:#639;margin-bottom:35px;text-decoration:underline}.cart-info[_ngcontent-%COMP%]   .cart-price-info[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-wrap:nowrap;justify-content:space-between;align-items:center;margin-bottom:30px}.cart-info[_ngcontent-%COMP%]   .cart-price-info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#639;font-size:19px}.cart-info[_ngcontent-%COMP%]   .cart-head[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px;width:50%}.cart-info[_ngcontent-%COMP%]   .cart-details[_ngcontent-%COMP%]{margin-top:25px;width:100%;height:auto}.cart-info[_ngcontent-%COMP%]   .cart-details[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{border-bottom:1px solid rebeccapurple!important}.cart-info[_ngcontent-%COMP%]   .cart-details[_ngcontent-%COMP%]   .img-item[_ngcontent-%COMP%]   .img-fluid[_ngcontent-%COMP%]{width:100%;height:auto!important;margin-bottom:12px;margin-top:10px}.cart-info[_ngcontent-%COMP%]   .cart-details[_ngcontent-%COMP%]   .item-describtion[_ngcontent-%COMP%]{display:flex;width:100%;height:auto;flex-wrap:nowrap;justify-content:space-between;align-items:center}.cart-info[_ngcontent-%COMP%]   .cart-details[_ngcontent-%COMP%]   .item-describtion[_ngcontent-%COMP%]   .item-about[_ngcontent-%COMP%]{width:70%;height:auto;margin-top:100px}.cart-info[_ngcontent-%COMP%]   .cart-details[_ngcontent-%COMP%]   .item-describtion[_ngcontent-%COMP%]   .item-about[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:19px;color:#639;margin-bottom:15px}.cart-info[_ngcontent-%COMP%]   .cart-details[_ngcontent-%COMP%]   .item-describtion[_ngcontent-%COMP%]   .item-about[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:30px}.cart-info[_ngcontent-%COMP%]   .cart-details[_ngcontent-%COMP%]   .item-describtion[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;width:30%;justify-content:end;margin:auto}.cart-info[_ngcontent-%COMP%]   .cart-details[_ngcontent-%COMP%]   .item-describtion[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#8a33fd;color:#f0f8ff;margin-right:8px;margin-left:8px}.cart-info[_ngcontent-%COMP%]   .cart-details[_ngcontent-%COMP%]   .item-describtion[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#8a33fd;font-size:19px;font-weight:700;margin:0 6px}.cart-info[_ngcontent-%COMP%]{width:100%;height:auto;padding-top:1px}.cart-info[_ngcontent-%COMP%]   .empty-cart[_ngcontent-%COMP%]{width:50%;height:auto;margin:70px auto auto;text-align:center}.cart-info[_ngcontent-%COMP%]   .empty-cart[_ngcontent-%COMP%]   .img-fluid[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float 1.5s ease-in-out infinite alternate;margin-bottom:12px}@keyframes _ngcontent-%COMP%_float{0%{transform:translateY(0)}to{transform:translateY(-10px)}}.cart-info[_ngcontent-%COMP%]   .empty-cart[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#8a33fd;font-size:17px;margin-bottom:20px}.cart-info[_ngcontent-%COMP%]   .empty-cart[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#8a33fd;color:#fff}.payment-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8a33fd,#6c1ce8);color:#fff;font-size:1.1rem;font-weight:600;padding:12px 26px;border:none;border-radius:12px;cursor:pointer;letter-spacing:.4px;box-shadow:0 4px 12px #8a33fd66;transition:all .3s ease-in-out;margin-top:15px!important}.payment-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#9a4dff,#8a33fd);transform:translateY(-2px) scale(1.04);box-shadow:0 6px 18px #8a33fd8c}.payment-btn[_ngcontent-%COMP%]:active{transform:scale(.98);box-shadow:0 2px 8px #8a33fd4d}@media (max-width: 767px){.cart-info[_ngcontent-%COMP%]   .cart-price-info[_ngcontent-%COMP%]{flex-wrap:wrap}.cart-info[_ngcontent-%COMP%]   .cart-price-info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#0aad0a;font-size:19px;margin-bottom:20px}.cart-info[_ngcontent-%COMP%]   .cart-head[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px;width:50%}.cart-info[_ngcontent-%COMP%]   .cart-details[_ngcontent-%COMP%]   .item-describtion[_ngcontent-%COMP%]   .item-about[_ngcontent-%COMP%]{margin-top:50px}.cart-info[_ngcontent-%COMP%]   .cart-details[_ngcontent-%COMP%]   .group-btn[_ngcontent-%COMP%]{width:100%;height:auto}.cart-info[_ngcontent-%COMP%]   .empty-cart[_ngcontent-%COMP%]{width:100%;height:auto;margin:70px auto auto;text-align:center}}@media (min-width: 768px) and (max-width: 1023px){.cart-info[_ngcontent-%COMP%]   .cart-details[_ngcontent-%COMP%]   .group-btn[_ngcontent-%COMP%]{width:100%;height:auto}.cart-info[_ngcontent-%COMP%]   .empty-cart[_ngcontent-%COMP%]{width:100%;height:auto;margin:70px auto auto;text-align:center}}"],data:{animation:[D("fadeIn",[v(":enter",[f({opacity:0,transform:"translateY(30px) scale(0.95)"}),y("600ms cubic-bezier(0.25, 1, 0.5, 1)",f({opacity:1,transform:"translateY(0) scale(1)"}))]),v(":leave",[y("300ms ease-in",f({opacity:0,transform:"translateY(20px) scale(0.9)"}))])])]}})}}return r})();export{Z as CartComponent};
